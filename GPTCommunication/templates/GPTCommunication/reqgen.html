{% extends "base.html" %}
{% load static %}

{% block title %}
    ReqGen - Chatbot based on GPT-3.5
{% endblock title %}

{% block css_files %}
    <link rel="stylesheet" href="{% static "GPTCommunication/reqgen.css" %}">
{% endblock css_files %}

{% block content %}
<div id="UploadGenerateArea">
    <form id="upload_form" method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <h3>Uploading:</h3>
        <div class="upload_area">
            <input type="file" name="file" id="uploadFile" hidden/>
            <label id="upload_label" for="uploadFile">Click to choose a file</label>
        </div>
        <div id="upload_div">
            <button type="submit" name="upload_form" id="upload_button">Upload</button>
        </div>
    </form>
    <form id="interaction_form" method="post">
        {% csrf_token %}
        <h3>Generating:</h3>
        <div class="button_area">
            <button type="submit" id="submit_button" name="interaction_form" onclick="disableButton()">Create requirements list</button>
        </div>
    </form>
</div>
<div class="output_area">
    <div id="output_gpt">
        <h3>Output:</h3>
    </div>
</div>
<div id="output_text">
    <p id="responseFour">Requirements are generating...</p>
    {% if response %}
        <p id="response">
            {{ response|safe|linebreaksbr }}
        </p>
        <br>
    {% else %}
        {% if NoFileNoReq %}
        <p id="responseTwo">Please upload a file first.</p>
        {% elif NoFile %}
        <p id="responseTwo">Please choose a file to upload.</p>
        {% elif FileUploaded %}
        <p id="responseThree">File was uploaded successfully.</p>
        {% endif %}
    {% endif %}
</div>
<div id="ManageRequirementsArea">
    <button id="ManageRequirements" onclick="location.href='{% url "Requirements"%}';">Manage requirements</button>
</div>
<script>
    document.getElementById("submit_button").addEventListener("click", function() {
        // Show the message
        var message = document.getElementById("responseFour");
        message.style.display = "block";
    
        // Hide the message after 3000 milliseconds (3 seconds)
        setTimeout(function() {
            message.style.display = "none";
        }, 3000);
    });
</script>
{% endblock content %}
